<div>

  <div>
    <span class="eid">{{result.exam.id}}</span>
    <span id="ename">
      <app-editor heading="Edit Exam Title"
        [content]="result.exam.title"
        (onedit)="onEditTitle($event)" >
      </app-editor>
    </span>
    <span class="eid"> ({{result.id}})</span>
    <span class="when"> {{result.when | date: 'yyyy-MMM-dd H:mm EEE'}} </span>
  </div>

  <br>
  <div fxLayout="row" gdArea="content">
    <span id="pause" (click)="pauseExam()"
        [class.locked]="result.isLocked()"
        data-toggle="tooltip" title="Pause Exam"
        class="btn btn-small btn-danger btn-sm" >
      <span class="glyphicon glyphicon-pause"></span>
    </span> <sp></sp>
    <span id="cancel" (click)="gotoDash()"
        [class.locked]="result.isLocked()"
        class="btn btn-small btn-danger btn-sm" >
      <span *ngIf="!result.isLocked()">Cancel</span>
      <span *ngIf="result.isLocked()">Home</span>
    </span> <sp></sp>
    <span id="done" (click)="results()"
        [class.locked]="result.isLocked()"
        class="btn btn-small btn-success btn-sm" >
      <span *ngIf="!result.isLocked()">Done</span>
      <span *ngIf="result.isLocked()">Results</span>
    </span>
    <span [class.hidden]="isBelowVer6()">
      <span id="seconds"> &nbsp;&nbsp; {{ qsec() }} </span>
      {{ tsec() }} &nbsp;&nbsp;
    </span>
    <span *ngIf="!isPending && maxDuration >= 1" style="color: blue; padding-top: 4px;">
      <sp></sp><sp></sp>
      <span>Duration: <span>{{ maxDuration }}</span> (mins)</span>
    </span>
    <sp></sp><sp></sp>
    <sp></sp><sp></sp>
    <mat-chip-list>
      <!-- <mat-chip [disabled]="result.isLocked()" [class.actionable]="!result.isLocked()" -->
      <mat-chip [disabled]="true" [class.actionable]="false"
          (click)="snapshot()">
        <span>Snapshots:</span>
      </mat-chip>
    </mat-chip-list>
    <sp></sp><sp></sp>
    <mat-chip-list>
      <mat-chip *ngFor="let snap of this.context.getResultSnapshots(result.id); let j=index"
          [disabled]="!result.isLocked()" [class.actionable]="result.isLocked()"
          class="snapshot-show" (click)="showSnapshot(j)">
        <span>{{ mins(snap.durationTotal()) }}</span>
      </mat-chip>
    </mat-chip-list>
  </div>

  <br>
  <span *ngIf="context.isAdmin">
    <span *ngIf="isPending">
      <mat-form-field>
        <mat-label> <span style="color: red;">Duration (min):</span> </mat-label>
        <input matInput type="number" placeholder="Ex. 60"
          (change)="maxDurationChange($event.target.value)" [value]="maxDuration">
        <sp></sp>
      </mat-form-field>
      <sp></sp><sp></sp>
    </span>
    <mat-form-field>
      <mat-label> <span style="color: red;">Marking Scheme:</span> </mat-label>
      <mat-select [(value)]="markingScheme">
        <mat-option value="OLD">OLD</mat-option>
        <mat-option value="GENERAL">GENERAL</mat-option>
        <mat-option value="NSEJS">NSEJS</mat-option>
        <mat-option value="JEEMAIN">JEEMAIN</mat-option>
        <mat-option value="NSEP">NSEP</mat-option>
        <!-- <mat-option *ngFor="let sc of schemes;" value="sc">{{sc}}</mat-option> -->
      </mat-select><sp></sp>
    </mat-form-field>
  </span>
  <div *ngIf="isPending">
    <button mat-raised-button (click)="addQuestion()">Add Question!</button>
    <button mat-raised-button class="gap" (click)="addLinkQuestion()">Add LINK Question!</button>
    <button mat-raised-button *ngIf="isResultsPage" class="gap" (click)="startGroup()">Add GROUP Question!</button>
    <span class="gap"> {{question.fullid()}} </span>
    <button mat-raised-button *ngIf="!isResultsPage" class="gap" (click)="deleteQuestion()">Delete Question!</button>
  </div>
  <br>
  <div class="btn-toolbar" role="toolbar">
    <span *ngFor="let q of result.questions; let i=index">
      <span
        class="btn btn-info nav-button nav-number" role="group"
        [class.locked]="result.isLocked()"
        [class.partial]="result.isPartial(i)"
        [class.correct]="result.isCorrect(i)"
        [class.guessing]="result.guessings[i]"
        [class.attempted]="result.isAttempted(i)"
        [class.omitted]="result.isOmitted(i)"
        [class.selected]="i == qidn"
        (click)="select(i)"
        id="b{{i}}"
        type="button">
        {{i+1}}
      </span>
    </span>
    <span id="results" (click)="results()" [class.selected]="isResultsPage"
        class="btn btn-info nav-button">
      Results
    </span>
  </div>
  <br>
  <span id="continue" (click)="next()"
      [class.locked]="result.isLocked()"
      [class.attempted]="result.isAttempted(qidn)"
      class="btn btn-small btn-primary btn-sm" >
    Continue <span class="glyphicon glyphicon-arrow-right glyph-span"></span>
  </span> <sp></sp>
  <span (click)="markGuess(false)" id="btn-sure"
      [class.disabled]="result.isLocked()"
      [class.attempted]="result.isAttempted(qidn)"
      [class.selected]="!result.guessings[qidn]"
      class="btn btn-small btn-sm btn-doubt" >
    I'm sure
  </span> <sp></sp>
  <span (click)="markGuess(true)" id="btn-guess"
      [class.disabled]="result.isLocked()"
      [class.attempted]="result.isAttempted(qidn)"
      [class.selected]="result.guessings[qidn]"
      class="btn  btn-small btn-sm btn-doubt" >
    I'm guessing
  </span>
</div>
<br>
<div *ngIf="isPending && !isResultsPage">
  <app-files-manager [eid]="this.result.exam.id" [qidn]="qidn" [files]="question.files">
  </app-files-manager>
</div>
